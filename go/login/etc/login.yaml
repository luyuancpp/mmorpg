# 基础RPC服务配置
Name: login.rpc
ListenOn: 127.0.0.1:50000
Timeout: 100000  # 服务器端处理单个请求的最大超时（10秒）

Etcd:
  Hosts:
    - 127.0.0.1:2379
  Key: login.rpc

# 节点配置（新增登录时长限制）
Node:
  ZoneId: 0
  SessionExpireMin: 1                  # 会话闲置超时（1分钟未操作则过期）
  MaxLoginDevices: 3                   # 单账号最大登录设备数
  LeaseTTL: 500                        # 租约超时（秒）
  QueueShardCount: 50                  # 队列分片数
  # 新增：登录时长限制（单次登录的最大在线时长）
  MaxLoginDuration: 5m                # 最大登录时长（24小时，超时强制下线）
  LogoutGraceTime: 5s                  # 超时前5分钟提醒玩家
  RedisClient:
    Host: 127.0.0.1:6379
    Password: ""
    DB: 0
    DefaultTTL: 24h
    DialTimeout: 3s
    ReadTimeout: 3s
    WriteTimeout: 3s

# 雪花ID配置
Snowflake:
  Epoch: 1721473263000  # 2024-07-20 15:01:03 的毫秒时间戳
  NodeBits: 13
  StepBits: 9

# 分布式锁配置
Locker:
  AccountLockTTL: 10  # 10秒
  PlayerLockTTL: 5    # 5秒

# 账号配置
Account:
  MaxDevicesPerAccount: 3
  CacheExpire: 12h    # 12小时

# 服务注册发现配置
Registry:
  Etcd:
    Hosts:
      - 127.0.0.1:2379
    Key: loginservice.rpc
    DialTimeout: 5s

# 超时配置
Timeouts:
  EtcdDialTimeout: 5s
  ServiceDiscoveryTimeout: 10s
  TaskWaitTimeout: 5s
  LoginTotalTimeout: 10s  # 登录过程总超时（包含Redis加载、数据库操作等）
  RoleCacheExpire: 24h
  TaskManagerCleanInterval: 5s   # 任务管理器清理间隔
  TaskBatchExpireTime: 10s       # 任务批次过期时间
  
# Kafka配置
Kafka:
  Brokers: "127.0.0.1:9092"
  GroupID: "db_rpc_consumer_group"
  Topic: "db_task_topic"
  PartitionCnt: 5
  InitialPartition: 5
  DialTimeout: 10s
  ReadTimeout: 30s
  WriteTimeout: 10s
  RetryMax: 3
  RetryBackoff: 100ms
  ChannelBuffer: 1024
  SyncInterval: 30s
  StatsInterval: 5m
  CompressionType: 0
  Idempotent: true
  MaxOpenRequests: 1