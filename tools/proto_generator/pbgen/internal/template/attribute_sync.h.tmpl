// Code generated by pbgen. DO NOT EDIT.
#pragma once

// 基础类型依赖
#include <bitset>
#include <cstdint>

// 第三方库依赖
#include <boost/dynamic_bitset.hpp>
#include "entt/src/entt/entity/entity.hpp"
#include "engine/core/type_define/type_define.h"

/**
 * @brief 脏掩码组件：用于标记{{ .MessageName }}消息对应的实体属性是否需要同步
 * @note 基于boost::dynamic_bitset实现，支持动态扩容，每个bit对应一个属性字段的脏状态
 */
struct {{ .MessageName }}DirtyMaskComp {
    /// 脏状态掩码：bit位为1表示对应字段需要同步，初始全为0
    boost::dynamic_bitset<> dirtyMask;
};

/**
 * @brief 同步{{ .MessageName }}消息对应的实体属性到AOI范围内的玩家
 * @param entity entt实体ID，标识要同步的实体
 * @param message_id 广播使用的消息ID，用于网络层识别消息类型
 */
void {{ .MessageName }}SyncAttributes(entt::entity entity, uint32_t message_id);

/**
 * @brief 同步{{ .MessageName }}消息对应的实体属性到指定的无序玩家集合
 * @param entity entt实体ID，标识要同步的实体
 * @param message_id 广播使用的消息ID，用于网络层识别消息类型
 * @param targetPlayers 需要同步的玩家实体无序集合
 */
void {{ .MessageName }}SyncAttributes(entt::entity entity, uint32_t message_id, const EntityUnorderedSet& targetPlayers);

/**
 * @brief 同步{{ .MessageName }}消息对应的实体属性到指定的有序玩家列表
 * @param entity entt实体ID，标识要同步的实体
 * @param message_id 广播使用的消息ID，用于网络层识别消息类型
 * @param targetPlayers 需要同步的玩家实体有序列表
 */
void {{ .MessageName }}SyncAttributes(entt::entity entity, uint32_t message_id, const EntityVector& targetPlayers);

/**
 * @brief 设置{{ .MessageName }}消息对应属性的脏位（自动扩容bitset）
 * @param entity entt实体ID，标识要操作的实体
 * @param bitIdx 脏位索引，对应Proto消息中字段的编号
 */
void Set{{ .MessageName }}AttrDirtyBit(entt::entity entity, std::size_t bitIdx);