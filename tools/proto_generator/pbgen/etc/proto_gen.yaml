# Proto代码生成器配置文件
# 基于常量定义的配置映射

paths:
  # 项目根目录及基础路径
  output_root: "../../../"
  proto_dir: "{{output_root}}proto/"
  proto_parent_include_path: "{{output_root}}"
  third_party_dir: "third_party/"
  grpc_dir: "{{output_root}}{{third_party_dir}}grpc/"
  protobuf_dir: "{{grpc_dir}}third_party/protobuf/src/"

  # 节点与生成目录
  node_go_dir: "{{output_root}}go/"
  node_cpp_dir: "{{output_root}}cpp/"
  node_pkg_dir: "cpp/libs/"
  node_libs_engine_dir: "{{node_pkg_dir}}engine/"
  node_lib_game_dir: "{{node_pkg_dir}}services/"
  node_pkg_logic_scene_node_dir: "{{node_lib_game_dir}}scene/"
  room_node_dir: "{{node_cpp_dir}}nodes/scene/"
  centre_node_dir: "{{node_cpp_dir}}nodes/centre/"
  gate_node_dir: "{{node_cpp_dir}}nodes/gate/"
  robot_dir: "tools/robot/"
  generated_dir: "cpp/generated/"

  # 工具与临时目录
  tool_dir: "tools/"
  temp_file_gen_dir: "{{output_root}}{{tool_dir}}generated/temp/files/"
  pb_desc_dir: "{{temp_file_gen_dir}}proto_desc/"
  all_in_one_desc: "{{pb_desc_dir}}all_in_one.desc"
  grpc_temp_dir: "{{temp_file_gen_dir}}grpc/"
  pbc_temp_dir: "{{temp_file_gen_dir}}"
  player_storage_temp_dir: "{{temp_file_gen_dir}}/node/game/storage/"

  # 输出目录
  pbc_proto_output_dir: "{{output_root}}{{generated_dir}}"
  pbc_proto_output_no_suffix_dir: "{{output_root}}{{generated_dir}}"
  generated_output_dir: "{{output_root}}{{generated_dir}}"
  grpc_output_dir: "{{output_root}}{{generated_dir}}"
  grpc_proto_output_dir: "{{output_root}}{{generated_dir}}proto/"
  robot_go_output_dir: "{{output_root}}{{robot_dir}}"
  robot_go_game_pb_dir: "{{robot_go_output_dir}}generated/pb/game"
  robot_go_gen_dir: "{{output_root}}{{robot_dir}}"
  go_generator_dir: "{{node_go_dir}}"
  generated_rpc_dir: "{{generated_output_dir}}rpc/"
  service_info_dir: "{{generated_rpc_dir}}service_metadata/"
  pbc_lua_dir: "{{generated_output_dir}}lua/"
  client_lua_dir: "{{output_root}}bin/script/lua/service/"
  cpp_gen_grpc_dir: "{{output_root}}{{generated_dir}}grpc_client/"
  util_generator_dir: "{{output_root}}{{generated_dir}}proto_helpers/"
  generator_dir: "generated/"
  generator_proto_dir: "{{output_root}}{{generator_dir}}generated_proto/"
  project_generated_dir: "{{output_root}}generated/"
  table_generator_dir: "{{project_generated_dir}}generated_data/"
  game_rpc_proto_path: "{{proto_dir}}common/"
  tools_dir: "{{output_root}}{{tool_dir}}"

  # 特定文件路径
  service_id_file: "{{proto_dir}}service_id.txt"
  robot_message_id_file: "{{robot_go_game_pb_dir}}/message_id.go"
  service_cpp_file: "{{service_info_dir}}service_metadata.cpp"
  service_header_file: "{{service_info_dir}}service_metadata.h"
  lua_service_file: "{{pbc_lua_dir}}lua_service.cpp"
  client_lua_service_file: "{{output_root}}client/src/handler/service_lua.cpp"
  grpc_init_cpp_file: "{{cpp_gen_grpc_dir}}grpc_init_client.cpp"
  grpc_init_head_file: "{{cpp_gen_grpc_dir}}grpc_init_client.h"
  gen_util_cpp_file: "{{util_generator_dir}}proto_util.cpp"
  gen_util_head_file: "{{util_generator_dir}}proto_util.h"
  robot_message_body_handler_file: "{{output_root}}{{robot_dir}}logic/handler/message_body_handler.go"
  player_storage_system_dir: "{{output_root}}{{node_pkg_logic_scene_node_dir}}player/system/"
  player_data_loader_file: "{{output_root}}{{node_pkg_logic_scene_node_dir}}player_data_loader.h"
  protoc_path: "protoc"

# 文件扩展名配置
file_extensions:
  proto: ".proto"
  pb_cc: ".pb.cc"
  pb_h: ".pb.h"
  grpc_pb_cc: ".grpc.pb.cc"
  grpc_pb_h: ".grpc.pb.h"
  proto_dir_name: "proto/"
  go_zero_proto_dir_name: "go-zero_proto/"
  header: ".h"
  cpp: ".cpp"
  lua_cpp: "_lua.cpp"
  handler_h: "_handler.h"
  handler_cpp: "_handler.cpp"
  replied_handler_h: "_response_handler.h"
  replied_handler_cpp: "_response_handler.cpp"
  cpp_sol2: "_sol2.cpp"
  grpc_client: "_grpc_client"
  grpc_client_h: "_grpc_client.h"
  grpc_client_cpp: "_grpc_client.cpp"
  model_sql: "mysql_database_table.sql"
  loader_cpp: "_loader.cpp"

# 命名规则配置
naming:
  message_id: "MessageId"
  method_index: "Index"
  handler_file: "Handler"
  replied_handler_file: "Reply"
  event_handler_base: "event_handler"
  empty_response: "Empty"
  mysql_name: "mysql"
  player_service: "player_service_interface.cpp"
  player_replied_service: "player_rpc_response_handler.cpp"
  complete_queue: "CompleteQueue"
  database_prefix: "db"
  db_proto_file: "db_base.proto"
  db_table_file: "mysql_database_table.proto"
  db_table_list_json: "mysql_database_table_list.json"
  game_rpc_proto: "game_rpc.proto"
  grpc_name: "grpc"

# 路径列表配置
path_lists:
  # Proto目录列表（按原顺序保留）
  proto_directories:
    - "common/"
    - "logic/component/"
    - "logic/event/"
    - "logic/"
    - "logic/"
    - "service/go/grpc/player_locator/"
    - "logic/constants/"
    - "middleware/etcd/"
    - "service/go/grpc/login/"
    - "service/go/grpc/db/"
    - "service/cpp/rpc/centre/"
    - "service/cpp/rpc/scene/"
    - "service/cpp/rpc/gate/"
    - "service/go/grpc/chat/"
    - "service/go/grpc/team/"
    - "service/go/grpc/mail/"
    - "logic/database/"

  # 方法处理器目录列表
  method_handler_directories:
    robot: "{{output_root}}{{robot_dir}}logic/handler/"
    room_node: "{{room_node_dir}}handler/rpc/"
    room_node_player: "{{room_node_dir}}handler/rpc/player/"
    room_node_replied: "{{room_node_dir}}rpc_replies/"
    room_node_player_replied: "{{room_node_dir}}rpc_replies/player/"
    centre_node: "{{centre_node_dir}}handler/rpc/"
    centre_node_player: "{{centre_node_dir}}handler/rpc/player/"
    centre_replied: "{{centre_node_dir}}rpc_replies/"
    centre_player_replied: "{{centre_node_dir}}rpc_replies/player/"
    gate_node: "{{gate_node_dir}}handler/rpc/"
    gate_node_replied: "{{gate_node_dir}}rpc_replies/"
    gate_node_player: "{{gate_node_dir}}handler/rpc/player/"
    gate_node_player_replied: "{{gate_node_dir}}rpc_replies/player/"

  # gRPC支持的语言列表
  grpc_languages:
    - "go"
    - "python"
    - "java"
    - "csharp"
    - "ruby"
    - "node"
    - "php"
    - "objc"
    - "swift"

# 生成器开关配置
generators:
  enable_cpp: true
  enable_go: true
  enable_handler: true
  enable_rpc_response: true

# 模板映射配置
mappings:
  handler:
    path: "handlers/{{proto_dir}}/{{proto_file}}_handler.cpp"
    template: "templates/handler.tmpl"
    lang: "cpp"
  rpc_response:
    path: "rpc_response/{{proto_dir}}/{{proto_file}}_response.cpp"
    template: "templates/rpc_response.tmpl"
    lang: "cpp"
  go_grpc:
    path: "go/{{proto_dir}}/{{proto_file}}_grpc.pb.go"
    template: "templates/go_grpc.tmpl"
    lang: "go"

# Proto解析器配置
parser:
  include_paths:
    - "../../proto/common"
    - "../../proto/service"
  ignore_files:
    - "test_*.proto"
    - "deprecated_*.proto"

# 日志配置
log:
  level: "info"
  output: "stdout"
  file_path: "pbgen.log"